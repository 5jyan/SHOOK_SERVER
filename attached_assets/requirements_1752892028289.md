# 웹 서비스 요구사항 (Requirements)

## 1. 개요 (Overview)
본 문서는 사용자가 지정한 YouTube 채널의 새로운 영상이 업로드될 때마다 해당 영상의 내용을 요약하여 사용자의 Slack 채널로 자동으로 전송하는 웹 서비스의 요구사항을 정의합니다.

## 2. 기능 요구사항 (Functional Requirements)

### 2.1. YouTube 채널 관리

#### 채널 추가
- 사용자는 @으로 시작하는 YouTube 채널 핸들러명(예: `@GoogleDevelopers`)을 입력할 수 있는 입력 필드를 제공한다.
- 사용자가 "채널 추가" 버튼을 클릭하면, [Google API](https://www.googleapis.com/youtube/v3/channels)를 사용하여 해당 채널 정보를 요청한다.
- 요청 시 `part` 파라미터에 `snippet`과 `statistics`를 포함한다.
- 오류 시: "채널 정보가 확인되지 않습니다."라는 메시지를 사용자에게 표시한다.
- 성공 시: 섬네일, 채널명, 구독자 수를 입력 필드 아래에 표시한다.
- 성공적으로 추가된 채널의 고유 `channel ID`는 시스템에 저장한다.
- 사용자는 여러 개의 채널을 추가할 수 있어야 한다.

#### 채널 정보 표시
- 추가된 채널은 섬네일, 채널명, 구독자 수 형태로 목록에 표시한다.

#### 채널 삭제
- 각 채널 우측에 "삭제" 버튼을 제공한다.
- "삭제" 클릭 시 해당 채널이 목록에서 제거되고 시스템 내 `channel ID`도 삭제된다.

### 2.2. Slack 연동 및 사용자 채널 설정

#### Slack 이메일 입력
- Slack 이메일 주소를 입력할 수 있는 필드를 제공한다.

#### Slack 초대 발송
- 이메일 입력 후 "초대 발송" 버튼 클릭 시 Slack API를 통해 해당 이메일의 Slack 계정을 `newsfeed-fcm6025.slack.com` 워크스페이스에 초대한다.
- 버튼 클릭 후 "이메일로 초대 발송이 요청되었습니다. 이메일을 확인하시고 초대를 승인해주세요." 문구를 표시한다.

#### 워크스페이스 입장 감지 및 채널 생성
- 사용자가 초대를 승인하고 입장하면 Slack API로 감지한다.
- Slack User ID를 기반으로 비공개 채널을 생성하고 봇과 사용자를 초대한다.

#### Slack 입장 상태 확인 및 UI 업데이트
- 웹 페이지 새로고침 시 사용자의 Slack 입장 상태를 확인한다.
- 입장 시: 이메일 입력 필드 및 버튼을 숨기고 메시지를 표시한다.
- 미입장 시: 입력 필드 및 버튼 유지

### 2.3. 자동화 워크플로우 (메시지 전송)

#### 워크플로우 시작 조건
- Slack 채널 입장 완료 및 하나 이상의 YouTube 채널이 등록된 경우에만 워크플로우를 시작한다.

#### 주기적 트리거
- 10분마다 각 채널의 RSS Feed를 트리거한다.

#### 새 영상 감지
- 최신 영상 ID를 저장하고 이전 값과 비교하여 변화가 있을 경우에만 처리한다.

#### 영상 자막 정보 가져오기
- 영상 ID를 사용하여 자동 생성 자막 정보를 Google API로 가져온다.

#### 영상 내용 요약
- 자막 정보를 Claude API에 요청하여 한국어 요약을 받는다.

#### Slack 채널 게시
- 요약 결과를 해당 사용자의 비공개 Slack 채널에 게시한다.

## 3. 기술 요구사항 (Technical Requirements)

| 항목 | 내용 |
|------|------|
| 프론트엔드 | HTML, CSS, JavaScript 또는 React |
| 백엔드 | YouTube API, Slack API, Claude API 연동 |
| Google API | YouTube Data API v3 (`snippet`, `statistics`, captions 등) |
| Slack API | 초대, 채널 생성, 메시지 전송, 상태 감지 등 |
| Claude API | 자막 요약 |
| 데이터 저장 | YouTube 채널 ID 목록, 마지막 트리거 ID, Slack user/channel ID, 이메일 등 |
| 워크스페이스 | `newsfeed-fcm6025.slack.com` |

## 4. 비기능 요구사항 (Non-Functional Requirements)

- **성능**: RSS Feed 트리거는 10분마다 실행된다.
- **사용성**: 직관적인 UI 제공
- **안정성**: API 실패 시 오류 처리 및 재시도 로직 포함
- **보안**: 사용자 데이터(이메일, API 키)는 안전하게 관리